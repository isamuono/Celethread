$('#thread-reaction-Modal<%= @gthread.id %>').html('<%= escape_javascript(render partial: 'thread_reactions/reaction_image_index_modal', locals: { gthread: @gthread, thread_reaction_users: @gthread.thread_reaction_users }) %>');

$('#thread-reaction-Modal<%= @gthread.id %>').modal('show');

$('#thread-reaction-Modal<%= @gthread.id %>').on('hidden.bs.modal', function() {
  $('#thread-reaction-Modal<%= @gthread.id %>').modal('hide');
  
  $.ajax({
    'url': '/channels/<%= @gthread.channel.id %>/gthreads/<%= @gthread.g_uid %>',
    'dataType': 'html',
    'cache': false
  })
  .then(function(data) {
    window.history.pushState(null, null, '/channels/<%= @gthread.channel.id %>/gthreads');
  })
  
  //App.thread_reaction.unsubscribe();
});

window.history.pushState(null, null, '/channels/<%= @gthread.channel.id %>/gthreads/<%= @gthread.g_uid %>');